<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
  <template id="event_badge_info" name="Event Badge info part">
    <div class="main_info width-100 height-50">
      <div class="width-100 height-60 clearfix">
        <t t-call="event_report_base.event_badge_event_data">
          <t t-set="labels" t-value="True" />
        </t>
        <div class="info_block width-40 height-50 right_block last_block company_logo">
          <div class="width-100 height-90">
            <div class="width-70 height-90 image-wrapper center-block">
              <t t-call="event_report_base.company_logo">
                <t t-set="logo_field" t-value="'report_logo_big'" />
                <t t-set="img_style" t-value="'width:100%;margin-top:10%'" />
              </t>
            </div>
          </div>
        </div>
        <div class="info_block width-40 height-50 right_block last_block attendee_info">
          <div class="width-100 height-50">
            <strong>Participant</strong>
            <div class="event-data">
              <span t-field='o.name' />
            </div>
          </div>
        </div>
      </div>
      <div class="width-100 height-40 last_row clearfix">
        <div class="info_block height-100 width-10 left_block barcode_container">
          <div class="barcode_rotate width-100 height-100">
            <img
                            class="barcode barcode_vertical"
                            t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=1' % ('Code128', o.barcode, 340, 100)"
                        />&amp;nbsp;
          </div>
        </div>
        <t t-call="event_report_base.organizer_map" />
      </div>
    </div>
  </template>

  <template
        id="event_badge_main"
        name="Event Badge"
        inherit_id="event.event_registration_report_template_badge"
    >
    <t t-call="web.basic_layout" position="replace">
      <t t-call="web.basic_layout">
        <t t-foreach="docs" t-as="o">
          <t
                        t-set="o"
                        t-value="o.with_context(lang=o.partner_id.lang or 'fr_FR',tz=o.event_id.date_tz)"
                    />
          <t t-set="event" t-value="o.event_id" />
          <div class="page event event-badge">
            <t t-call="event_report_base.event_badge_info" />
            <t t-if="event.badge_type != 'neutral'">
              <t t-call="event_report_base.event_badge_pax" />
            </t>
          </div>
        </t>
      </t>
    </t>
  </template>

  <template id="event_badge_pax" name="Event Badge pax">
    <div class="pax_info height-50 width-100">
      <div class="left_side height-100 width-50">
        <t t-call="event_report_base.event_badge_pax_info" />
      </div>
      <div class="right_side height-100 width-50">
        <t t-call="event_report_base.event_badge_pax_info" />
      </div>
    </div>
  </template>

  <template id="event_badge_pax_info" name="Event Badge pax specific info">
    <div class="width-100 height-25">
      <div class="width-50 height-100 left_block">
        <t
                    t-if="event.badge_type in ['nominative_logo_training','nominative_nologo_training']"
                >
          <div class="bar green_bar" />
        </t>
        <t t-else="">
          <div class="bar purple_bar" />
        </t>
      </div>
    </div>
    <div class="width-100 height-50 pax_name">
      <div class="center">
        <div>
          <h3>
            <span t-field='o.firstname' />
            <span t-field='o.lastname' />
          </h3>
          <span class="company_name" t-field='o.partner_id.name' />
        </div>
      </div>
    </div>
    <div class="width-100 height-25">
      <t
                t-if="event.badge_type in ['nominative_logo_training','nominative_logo_event']"
            >
        <div style="padding-right: 5%;">
          <t t-call="event_report_base.company_logo">
            <t t-set="logo_field" t-value="'report_logo_big'" />
            <t t-set="img_style" t-value="'width:60%; float: right;'" />
          </t>
        </div>
      </t>
    </div>
  </template>

  <template id="event_badge_event_data" name="Event data">
    <t t-set="tracks" t-value="o.track_ids" />
    <div class="width-60 height-100 left_block">
      <div class="info_block width-100 height-50 title_block">
        <div t-if="labels" class="title_label">
          <strong t-field="event.event_type_id.name" />
        </div>
        <div class="title_block">
          <div>
            <p t-field="event.name" />
            <!-- NOTE: this makes poor sense if the track name is the same of the event -->
            <p t-if="tracks" t-fields="tracks[0].name" />
          </div>
        </div>
      </div>
      <t t-call="event_report_base.event_tracks_info" />
    </div>
  </template>

  <template id="event_tracks_info" name="Event tracks">
    <t t-if="tracks">
      <t t-set="track" t-value="tracks[0]" />
      <div class="info_block width-50 height-50 left_block date_block">
        <strong t-if="labels">Date and Time</strong>
        <div class="event-data">
          <t t-if="event.one_day">
            <span
                            class="day"
                            t-field="track.date"
                            t-field-options='{"widget": "date", "format": "EEEE"}'
                        />
            <span
                            class="date"
                            t-field="track.date"
                            t-field-options='{"widget": "date", "format": "d MMMM yyyy"}'
                        />
            <br /><span t-field="track.date" t-field-options='{"format": "HH:mm"}' />
          </t>
          <t t-else="">
            <p>From
            <span
                                class="day"
                                t-field="track.date"
                                t-field-options='{"widget": "date", "format": "EEEE"}'
                            />
            <span
                                class="date"
                                t-field="track.date"
                                t-field-options='{"widget": "date", "format": "d MMMM yyyy"}'
                            /></p>
            <p><span t-field="track.date" t-field-options='{"format": "HH:mm"}' /></p>
            <p>to
            <span
                                class="day"
                                t-field="track.date"
                                t-field-options='{"widget": "date", "format": "EEEE"}'
                            />
            <span
                                class="date"
                                t-field="track.date"
                                t-field-options='{"widget": "date", "format": "d MMMM yyyy"}'
                            /></p>
            <p><span
                                t-field="event.date_end"
                                t-field-options='{"format": "HH:mm"}'
                            /></p>
          </t>
        </div>
      </div>
      <div class="info_block width-50 height-50 right_block address_block">
        <strong t-if="labels">Place</strong>
        <div class="event-data">
          <span t-field="track.location_id" />
          <address
                        t-field="event.address_id"
                        t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'
                    />
        </div>
      </div>
    </t>
  </template>

  <template id="organizer_map" name="Organizer map">
    <div class="info_block height-100 width-90 last_block">
      <div
                class="width-100 height-100 image-wrapper location-map"
                t-att-style="'background-image:url(/web/image/res.partner/%s/location_map_image)' % event.address_id.id"
            />
    </div>
  </template>
</odoo>
